require 'spec_helper'
require 'ronin/model/targets_arch'

require 'model/models/targets_arch_model'

describe Model::TargetsArch do
  subject { TargetsArchModel }
  it "should define an arch relation" do
    relationship = subject.relationships['arch']

    relationship.should_not be_nil
    relationship.parent_model.should == Arch
  end

  it "should define a relationship with Arch" do
    relationship = Arch.relationships['targets_arch_models']

    relationship.should_not be_nil
    relationship.child_model.should == subject
  end

  it "should allow the arch to be set via the getter method" do
    resource = subject.new
    resource.arch! :x86

    resource.arch.name.should == 'x86'
  end
end
